{"version":3,"sources":["logo.svg","KnowledgeGraph.js","App.js","reportWebVitals.js","index.js"],"names":["KnowledgeGraph","d3KGraph","useRef","applyColor","group","parseInt","data","useState","fromJson","setFromJson","loading","setLoading","firstTimeLoading","setFirstTimeLoading","useEffect","d3","then","data2","filter","x","map","push","hierarchy","id","d","parentId","i","liste","sfi_index","length","test","findIndex","svg","current","update","console","log","depth","height2","width2","root","size","Math","PI","separation","a","b","parent","tree","selectAll","remove","append","attr","div","links","join","angle","radius","y","source","descendants","abs","children","on","node","labels","xy","transition","duration","style","html","event","_children","collapseLevel","text","initialCollapse","forEach","ref","App","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.84ef9bf5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, {useEffect, useRef, useState} from 'react';\r\nimport './App.css';\r\nimport * as d3 from 'd3';\r\nimport './knowledgegraph.css';\r\nfunction KnowledgeGraph(){\r\n    const d3KGraph = useRef();\r\n\r\n    const applyColor = (group) => {\r\n                \r\n        var hexVal = [\"#555\",\"#a3ff47\",\"#ff4747\",\"#47ffe6\",\"#ff47ea\",\"#47ff94\",\"#9747ff\",\"#4766ff\",\"#ffa347\"]\r\n        var group_nr = parseInt(group.data[\"https://www.sdir.no/SFI-model#code\"][0][\"@value\"][0])\r\n        return hexVal[group_nr]\r\n        \r\n    }\r\n\r\n    const findIndex = (liste) => {\r\n        var sfi_index = null\r\n        for (var i=0; i < liste.length; i++){\r\n            var id = liste[i][\"@id\"]\r\n            if (id == \"https://www.sdir.no/SFI-model#SFIConcept\"){\r\n                sfi_index = i;\r\n            } \r\n            else if(id == \"\") return 0;\r\n            else if (/\\d/.test(id)){ // remove else if, if every group is a part of SFIConcept\r\n                return i\r\n            }\r\n            \r\n        }\r\n        if(sfi_index != null) return sfi_index;\r\n        return i;\r\n    }\r\n\r\n    function collapseLevel(event,d,data,svg){\r\n        \r\n        if (d.children) {\r\n            d._children = d.children;\r\n            d.children = null;\r\n            } else {\r\n            d.children = d._children;\r\n            d._children = null;\r\n            }\r\n        setFromJson(data)\r\n        update(fromJson,svg)\r\n    }\r\n\r\n    function initialCollapse(d){\r\n        \r\n        if (d.children && d.depth > 0) {\r\n            d._children = d.children;\r\n            d._children.forEach(initialCollapse)\r\n            d.children = null;\r\n            }\r\n        \r\n        else if(d.children) {\r\n            d.children.forEach(initialCollapse)\r\n        }\r\n        else{\r\n            d.children = d._children;\r\n            d._children = null;\r\n        }\r\n    }\r\n\r\n\r\n    const [fromJson, setFromJson] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [firstTimeLoading, setFirstTimeLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n        d3.json('jsontest_2.json').then(data => {\r\n\r\n            var data2 = [] // New array to store triples with code property to avoid multiple root problem\r\n            data.filter(x => x[\"https://www.sdir.no/SFI-model#code\"]).map(x => data2.push(x))\r\n            \r\n            const hierarchy = d3.stratify() // Builds d3.hierarchy object from json\r\n            .id(function(d) { \r\n                if (d[\"https://www.sdir.no/SFI-model#code\"]){   \r\n                    return d[\"@id\"];\r\n                }\r\n                    })\r\n            .parentId(function(d) { \r\n                if (d[\"https://www.sdir.no/SFI-model#code\"]){\r\n                    var i = findIndex(d[\"http://www.w3.org/2000/01/rdf-schema#subClassOf\"])\r\n                    \r\n\r\n                    return d[\"http://www.w3.org/2000/01/rdf-schema#subClassOf\"][i][\"@id\"];\r\n                }\r\n                })\r\n            (data2);\r\n\r\n            setFromJson(hierarchy)\r\n            setLoading(false)\r\n        });\r\n\r\n        }, []);\r\n\r\n\r\n        \r\n\r\n        var svg = d3.select(d3KGraph.current)\r\n            \r\n\r\n        if(!loading){\r\n            if(firstTimeLoading){\r\n                initialCollapse(fromJson,svg)\r\n                setFirstTimeLoading(false)\r\n            }\r\n            \r\n            update(fromJson,svg)   \r\n        }\r\n            \r\n\r\n        function update(data, svg){\r\n\r\n            console.log(d3.max(data, (x) => {return x.depth}))\r\n\r\n            let height2 = 500\r\n            let width2 = 500\r\n            let radius = width2/2 - 50\r\n            const tree = d3.tree()\r\n            .size([2 * Math.PI, radius]) \r\n            .separation((a, b) => (a.parent == b.parent ? 1 : 6)/ a.depth)\r\n            \r\n            const root = tree(data)\r\n            \r\n            svg.selectAll(\"*\").remove()\r\n            \r\n            svg = svg.append('svg')\r\n            .attr(\"height\",height2)\r\n            .attr(\"width\",width2)\r\n            \r\n            // Define the div for the tooltip\r\n            var div = d3.select(d3KGraph.current).append(\"div\")\t\r\n                .attr(\"class\", \"tooltip\")\t\r\n                .attr(\"id\", \"tooltips\")\r\n                \r\n\r\n                // Applying attributes to Links in graph\r\n            svg.append(\"g\")\r\n                    .attr('transform', \"translate(\"+(width2/2)+\",\"+(height2/2)+\")\")\r\n                    .attr(\"fill\", \"none\")\r\n                    .attr(\"stroke-opacity\", 0.5)\r\n                    .attr(\"stroke-width\", 1)\r\n                .selectAll(\"path\")\r\n                .data(root.links())\r\n                .join(\"path\")\r\n                    .attr(\"d\", d3.linkRadial()\r\n                        .angle(d => d.x)\r\n                        .radius(d => d.y))\r\n                    \r\n                    .attr('stroke', function(d) { return applyColor(d.source); });\r\n\r\n            \r\n            // Applying attributes to Nodes in graph\r\n            svg.append(\"g\")\r\n                .attr('transform', \"translate(\"+(width2/2)+\",\"+(height2/2)+\")\")\r\n                .selectAll(\"circle\")\r\n                .data(root.descendants())\r\n                .join(\"circle\")\r\n                    .attr(\"transform\", d => `\r\n                        rotate(${d.x * 180 / Math.PI - 90})\r\n                        translate(${d.y},0)\r\n                        scale(${(Math.abs(4-d.depth)+1)*2})\r\n                    `)\r\n                    .attr(\"fill\", d => d.children ? \"#555\" : \"#999\")\r\n                    .attr('stroke', function(d) { return applyColor(d); })\r\n                    .attr(\"r\", 0.3)\r\n                .attr(\"cursor\", \"pointer\")\r\n                .on('mouseover', function(d,node){\r\n                    var code_info = node.data[\"https://www.sdir.no/SFI-model#code\"][0][\"@value\"]\r\n                    var label_info = node.data[\"http://www.w3.org/2000/01/rdf-schema#label\"][0][\"@value\"]\r\n\r\n                    var labels = code_info + \" \" + label_info\r\n                \r\n                    var xy = d3.pointer(d, node);\r\n\r\n                    div.transition()\t\t\r\n                        .duration(100)\t\t\r\n                        .style(\"visibility\", \"visible\");\t\t\r\n\r\n                    div.html(labels)    \r\n                        .style(\"left\", xy[0] + 5 + \"px\")\t\t\r\n                        .style(\"top\", (xy[1] - 55) + \"px\")\t\r\n                        .style(\"position\", \"absolute\")\r\n                        .style(\"border-radius\", \"25px\")\r\n                        .style(\"padding\", \"5px\")\r\n                        .style(\"display\", \"block\")\r\n                        .style(\"background-color\", \"#e7e7e7\")\r\n                        .style(\"visibility\", \"visible\");\t\t\r\n\r\n                    })\t\t\t\t\t\r\n                .on(\"mouseout\", function(d) {\t\t\r\n                    div.transition()\t\t\r\n                        .duration(100)\t\t\r\n                        .style(\"visibility\", \"hidden\");\t\r\n                })\r\n                .on(\"click\", function(d,node){\r\n                    div.transition()\t\t\r\n                        .duration(100)\t\t\r\n                        .style(\"visibility\", \"hidden\");\t\r\n                    collapseLevel(d,node,fromJson,svg);\r\n                });\r\n                                    \r\n\r\n            //Apply attributes to text in graph\r\n            svg.append(\"g\") \r\n                    .attr('transform', \"translate(\"+(width2/2)+\",\"+(height2/2)+\")\")\r\n                    .attr(\"font-family\", \"sans-serif\")\r\n                    .attr(\"font-size\", 1.5)\r\n                    .attr(\"stroke-linejoin\", \"round\")\r\n                    .attr(\"stroke-width\", 1.5)\r\n                .selectAll(\"text\")\r\n                .data(root.descendants())\r\n                .join(\"text\")\r\n                    .attr(\"transform\", d => `\r\n                        rotate(${d.x * 180 / Math.PI - 90}) \r\n                        translate(${d.y},0) \r\n                        rotate(${d.x >= Math.PI ? 180 : 0})\r\n                        scale(${(Math.abs(4-d.depth)+1)*2})\r\n                    `)\r\n                    .attr(\"dy\", \"0.31em\")\r\n                    .attr(\"x\", d => d.x < Math.PI === !d.children ? 6 : -6)\r\n                    .attr(\"text-anchor\", d => d.x < Math.PI === !d.children ? \"start\" : \"end\")\r\n                    .text(d => d.data[\"https://www.sdir.no/SFI-model#code\"][0][\"@value\"])\r\n                //.text(d => d.data[\"http://www.w3.org/2000/01/rdf-schema#label\"][0][\"@value\"])\r\n                .style(\"padding\",\"1px\")\r\n\r\n\r\n        }\r\n            \r\n            // data.sort(function(a,b){\r\n            //     return d3.descending(parseInt(a.data[\"https://www.sdir.no/SFI-model#code\"][0][\"@value\"][0]),parseInt(b.data[\"https://www.sdir.no/SFI-model#code\"][0][\"@value\"][0]))\r\n            // })\r\n       \r\n          \r\n      \r\n\r\n      \r\n            \r\n    return (\r\n           <div ref={d3KGraph}></div>\r\n    )\r\n}\r\n\r\nexport default KnowledgeGraph;","import logo from './logo.svg';\r\nimport './App.css';\r\nimport KnowledgeGraph from './KnowledgeGraph';\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n        <KnowledgeGraph/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}